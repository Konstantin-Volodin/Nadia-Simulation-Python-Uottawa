library(feather)
library(tidyverse)
data <- read_feather(here('ouput', 'testing.feather'))
data <- read_feather(here('ouput', 'testing.feather'))
data <- read_feather(here('output', 'testing.feather'))
data <- read_feather(here('output', 'testing.feather'))
install.packages("arrow")
library(arrow)
data <- arrow::read_feather(here('output', 'testing.feather'))
data
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived)
data
# Checks Distributions
data %>% distinct(id) %>% count()
# Checks Distributions
data %>% distinct(patient_id ) %>% count()
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id ) %>% count()
data
data %>% View()
data %>% drop_na(start_scan)
data %>% drop_na(end_scan)
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
# Scanned
data %>% drop_na(end_scan) %>% count()
# Total Returns
data %>% count() - data %>% distinct(patient_id) %>% count()
data <- arrow::read_feather(here('output', 'lz4-testing.feather'))
data <- arrow::read_feather(here('output', 'zstd-testing.feather'))
data <- arrow::read_feather(here('output', 'zstd-testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived)
mutate(service_time = end_scan - start_scan)
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
library(here)
library(arrow)
library(tidyverse)
data <- arrow::read_feather(here('output', 'zstd-testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived)
mutate(service_time = end_scan - start_scan)
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan)
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
# Total Scanned
data %>% drop_na(end_scan) %>% count()
# Total Returns
data %>% count() - data %>% distinct(patient_id) %>% count()
# Scan Time
data %>% summarize(avg = mean(service_time))
data
# Scan Time
data %>% summarize(avg = mean(service_time, na.rm = T))
# Scan Time
data %>% summarize(avg_st = mean(service_time, na.rm = T),
avg_wt = mean(wait_time, na.rm = T),
avg_is = mean(in_system, na.rm = T))
# Average Times
data %>% summarize(service_time = mean(service_time, na.rm = T),
= mean(wait_time, na.rm = T),
avg_is = mean(in_system, na.rm = T))
# Average Times
data %>% summarize(service_time = mean(service_time, na.rm = T),
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
data
data %>% group_by(scan_result) %>% count()
data %>% group_by(scan_result) %>% count() %>% drop_na()
data %>% group_by(scan_result) %>% count() %>% drop_na() %>% mutate(p = p/n)
data %>% count(scan_result) %>% drop_na() %>% mutate(p = p/n)
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n))
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative")
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% group_by(post_scan_result) %>% count()
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% group_by(prev_returns, post_scan_result) %>% count()
library(here)
library(arrow)
library(tidyverse)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan)
# Checks Numbers
# Distinct Arrivals
data %>% distinct(patient_id) %>% count()
# Total Scanned
data %>% drop_na(end_scan) %>% count()
# Total Returns
data %>% count() - data %>% distinct(patient_id) %>% count()
# Average Times
data %>% summarize(service_time = mean(service_time, na.rm = T),
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% group_by(prev_returns, post_scan_result) %>% count()
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% group_by(prev_neg_returns, post_scan_result) %>% count()
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% group_by(prev_neg_returns, post_scan_result) %>% count(prev_neg_returns)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>%
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% View()
#
data %>% filter(scan_result == "Negative") %>% distinct(biosy_results)
#
data %>% filter(scan_result == "Negative") %>% distinct(biosy_result)
View(data)
#
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data
data %>% distinct(replication)
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data %>% distinct(scan_result)
data %>% distinct(post_scan_result)
data %>% distinct(biopsy_result)
data %>% distinct(cancer_stage)
data %>% distinct(return_delay)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>%
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% distinct(replication)
data %>% filter(scan_result == "Negative") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Negative") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Negative") %>% distinct(return_delay)
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>% # Bulking
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative")
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Balking
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
data %>% filter(patient_id == 0)
data %>% filter(scan_result == "Suspicious")
data %>% filter(scan_result == "Suspicious") %>% View()
# Suspicious Scan Checking
data %>% filter(scan_result == "Suspicious") %>% distinct(replication)
data %>% filter(scan_result == "Suspicious") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% distinct(return_delay)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(0, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan)
data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(0, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(0, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(0, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
data %>% View()
data %>% filter(scan_result == "Suspicious")
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
post_scan_result %>% filter(scan_result=='Suspicious')
data  %>% filter(scan_result =='Suspicious')
data  %>% filter(scan_result =='Suspicious') %>% View()
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n)) # Biopsy Distribution
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data  %>% filter(scan_result =='Suspicious') %>% View()
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% distinct(replication)
data %>% filter(scan_result == "Negative") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Negative") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Negative") %>% distinct(return_delay)
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>% # Balking
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Return Delay
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
# Suspicious Scan Checking
data %>% filter(scan_result == "Suspicious") %>% distinct(replication)
data %>% filter(scan_result == "Suspicious") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% distinct(return_delay)
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
# Positive Scan Checking
data %>% filter(scan_result == "Positive") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Positive") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Positive") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Positive") %>% distinct(return_delay)
data %>% filter(scan_result == "Positive") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
data %>% filter(scan_result == "Positive") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(biopsy_result) %>% mutate(p=n/sum(n))  # Biopsy Distribution
data %>% filter(scan_result == "Positive") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious")
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat)
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, cancer_stage)
data %>% filter(scan_result == 'Suspicious' & cancer_stage == "Stage_1")
data %>% filter(scan_result == 'Suspicious' & cancer_stage == "Stage_1" & wait_time_cat = "NA")
data %>% filter(scan_result == 'Suspicious' & cancer_stage == "Stage_1" & wait_time_cat %>% is.na())
data %>% filter(scan_result == 'Suspicious' & cancer_stage == "Stage_1" & wait_time_cat %>% is.na())  %>% View()
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(-1, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
# Checks Numbers
data %>% distinct(patient_id) %>% count() # Arrivals
data %>% drop_na(end_scan) %>% count() # Total Scanned
data %>% count() - data %>% distinct(patient_id) %>% count() # Total Returns
data %>% summarize(service_time = mean(service_time, na.rm = T), # Average Times
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data %>% distinct(scan_result)
data %>% distinct(post_scan_result)
data %>% distinct(biopsy_result)
data %>% distinct(cancer_stage)
data %>% distinct(return_delay)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Negative") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Negative") %>% distinct(return_delay)
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>% # Balking
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Return Delay
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
# Suspicious Scan Checking
data %>% filter(scan_result == "Suspicious") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% distinct(return_delay)
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat)
data %>% filter(scan_result == "Suspicious") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Positive") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, biopsy_result, cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>%
group_by(biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>%
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>% # Cancer Staging
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(biopsy_result) %>% mutate(p=n/sum(n))  # Biopsy Distribution
data %>% filter(scan_result == "Positive") %>% count(biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(biopsy_result) %>% mutate(p=n/sum(n))
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(-1, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
# Checks Numbers
data %>% distinct(patient_id) %>% count() # Arrivals
data %>% drop_na(end_scan) %>% count() # Total Scanned
library(tidyverse)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(-1, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
# Checks Numbers
data %>% distinct(patient_id) %>% count() # Arrivals
data %>% drop_na(end_scan) %>% count() # Total Scanned
data %>% count() - data %>% distinct(patient_id) %>% count() # Total Returns
data %>% summarize(service_time = mean(service_time, na.rm = T), # Average Times
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data %>% distinct(scan_result)
data %>% distinct(post_scan_result)
data %>% distinct(biopsy_result)
data %>% distinct(cancer_stage)
data %>% distinct(return_delay)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Negative") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Negative") %>% distinct(return_delay)
data %>% filter(scan_result == "Negative") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>% # Balking
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Return Delay
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Return Delay
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
# Suspicious Scan Checking
data %>% filter(scan_result == "Suspicious") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% distinct(return_delay)
data %>% filter(scan_result == "Suspicious") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>% # Cancer Staging
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
# Positive Scan Checking
data %>% filter(scan_result == "Positive") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Positive") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Positive") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Positive") %>% distinct(return_delay)
data %>% filter(scan_result == "Positive") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Positive") %>% count(biopsy_result) %>% mutate(p=n/sum(n))  # Biopsy Distribution
data %>% filter(scan_result == "Positive") %>% count(biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>% # Cancer Staging
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(-1, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
# Checks Numbers
data %>% distinct(patient_id) %>% count() # Arrivals
data %>% drop_na(end_scan) %>% count() # Total Scanned
data %>% count() - data %>% distinct(patient_id) %>% count() # Total Returns
data %>% summarize(service_time = mean(service_time, na.rm = T), # Average Times
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data %>% distinct(scan_result)
data %>% distinct(post_scan_result)
data %>% distinct(biopsy_result)
data %>% distinct(cancer_stage)
data %>% distinct(return_delay)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Negative Scan Checking
data %>% filter(scan_result == "Negative") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Negative") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Negative") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Negative") %>% distinct(return_delay)
data %>% filter(scan_result == "Negative") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Negative") %>% count(prev_neg_returns, post_scan_result) %>% # Balking
group_by(prev_neg_returns) %>% mutate(p = n/sum(n)*100)
data %>% filter(scan_result == "Negative") %>% count(post_scan_result, return_delay) %>% # Return Delay
group_by(post_scan_result) %>% mutate(p = n/sum(n)*100)
# Suspicious Scan Checking
data %>% filter(scan_result == "Suspicious") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Suspicious") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Suspicious") %>% distinct(return_delay)
data %>% filter(scan_result == "Suspicious") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result) %>% mutate(p=n/sum(n)) # Biopsy Need Distribution
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result) %>% # Biopsy Distribution
group_by(post_scan_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(post_scan_result, biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(post_scan_result, biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Suspicious") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>% # Cancer Staging
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Positive Scan Checking
data %>% filter(scan_result == "Positive") %>% distinct(post_scan_result)
data %>% filter(scan_result == "Positive") %>% distinct(biopsy_result)
data %>% filter(scan_result == "Positive") %>% distinct(cancer_stage)
data %>% filter(scan_result == "Positive") %>% distinct(return_delay)
data %>% filter(scan_result == "Positive") %>% distinct(wait_time_cat)
data %>% filter(scan_result == "Positive") %>% count(biopsy_result) %>% mutate(p=n/sum(n))  # Biopsy Distribution
data %>% filter(scan_result == "Positive") %>% count(biopsy_result, return_delay) %>% # Return Delay Distribution
group_by(biopsy_result) %>% mutate(p=n/sum(n))
data %>% filter(scan_result == "Positive") %>% count(wait_time_cat, biopsy_result, cancer_stage) %>% # Cancer Staging
group_by(biopsy_result, wait_time_cat) %>% mutate(p=n/sum(n))
# Cancer Distribution
data %>% count(cancer_stage)
# Cancer Distribution
data %>% count(cancer_stage) %>% drop_na() %>% mutate(p = n/sum(n)*100)
data <- arrow::read_feather(here('output', 'testing.feather'))
data <- data %>%
mutate(wait_time = start_scan - arrived) %>%
mutate(in_system = end_scan - arrived) %>%
mutate(service_time = end_scan - start_scan) %>%
mutate(wait_time_cat=cut(wait_time,
breaks=c(-1, 180, 180*2, 180*3, 180*4, 180*5, 180*6, 180*7, 180*9, 180*10, Inf),
labels=c("0-6 Month","6-12 Month","12-18 Month", "18-24 Month", "24-30 Month", "30-36 Month",
"36-42 Month", "42-48 Month", "48-54 Month", "54-60 Month")))
# Checks Numbers
data %>% distinct(patient_id) %>% count() # Arrivals
data %>% drop_na(end_scan) %>% count() # Total Scanned
data %>% count() - data %>% distinct(patient_id) %>% count() # Total Returns
data %>% summarize(service_time = mean(service_time, na.rm = T), # Average Times
wait_time = mean(wait_time, na.rm = T),
in_system = mean(in_system, na.rm = T))
# Makes Sure data is saved correctly
data %>% distinct(replication)
data %>% distinct(prev_neg_returns)
data %>% distinct(scan_result)
data %>% distinct(post_scan_result)
data %>% distinct(biopsy_result)
data %>% distinct(cancer_stage)
data %>% distinct(return_delay)
# Scan Distribution
data %>% count(scan_result) %>% drop_na() %>% mutate(p = n/sum(n)*100)
# Cancer Distribution
data %>% count(cancer_stage) %>% drop_na() %>% mutate(p = n/sum(n)*100)
